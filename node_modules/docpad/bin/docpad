#!/usr/bin/env coffee
DocPad = require("#{__dirname}/../lib/docpad.coffee")
ConsoleInterface = require("#{__dirname}/../lib/consoleinterface.coffee")

# Create Program
program = require("#{__dirname}/../node_modules/commander/index.js")

# Configure Instance
docpadConfig = {}
docpadConfig.skeleton = program.skeleton  if program.skeleton
docpadConfig.port = program.port  if program.port

# Create Instance
docpad = DocPad.createInstance docpadConfig, (err) ->
	# Check
	throw err  if err

	# Create Console Interface
	consoleInterface = new ConsoleInterface({docpad,program})

	# Start
	consoleInterface.start()